{% extends "base.html" %}

{% block content %}
  <h1>

  </h1>

      <div class="card" style="width: 50rem;">
        <div class="card-body">
          <h4 class="card-title">{{ task.name }}</h4>
          <h6 class="card-title"><a href="{{ task.project.get_absolute_url }}">{{ task.project.name }}</a></h6>
          <h6 class="card-subtitle mb-2 text-muted">type: {{ task.task_type }}</h6>
          <h6 class="card-subtitle mb-2 text-muted">created at: {{ task.created_date.date }}</h6>
          <h6 class="card-subtitle mb-2">deadline: {{ task.deadline }}</h6>          
          <p class="card-text">
            {{ task.description }}
          </p>
          <p><strong>Assignees:</strong></p>
          <ul>
            {% for worker in task.assignees.all %} 
              <li>
                {{ worker.position }}:
                <a href="{{ worker.get_absolute_url }}">
                   {{ worker.first_name }} {{ worker.last_name }}  
                </a> ;
                Team:
                <a href="{% url 'task_manager:team-detail' pk=worker.team.id %}">
                  ({{ worker.team.name }})
                </a>
              </li>
            {% endfor %}
          </ul>
          <a href="{% url 'task_manager:task-delete' pk=task.id %}" class="btn btn-danger link-to-page">
            Delete
          </a>
      
          <a href="{% url 'task_manager:task-update' pk=task.id %}" class="btn btn-secondary link-to-page">
            Update
          </a>
          {% if not task.is_completed %}
            <form method="post" action="{% url 'task_manager:task-completed' pk=task.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-success">
                Mark as DONE
              </button>
            </form>
          {% endif %}
        </div>
      </div>
  
{% endblock %}
